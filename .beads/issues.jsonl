{"id":"nixcfg-03a","title":"Add flake checks","description":"Currently no validation. Add:\n\n```nix\nchecks = {\n  pre-commit = pre-commit-hooks.run {\n    hooks = {\n      nixfmt.enable = true;\n      statix.enable = true;\n    };\n  };\n};\n```","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T16:22:24.309178-08:00","created_by":"george","updated_at":"2026-01-10T16:22:24.309178-08:00"}
{"id":"nixcfg-0gz","title":"Update google-chrome to 144.0.7559.60 in nixpkgs","description":"Nixpkgs has 143.0.7499.193, Homebrew has 144.0.7559.60. Chrome updates frequently. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:36.235647-08:00","created_by":"gkze","updated_at":"2026-01-15T23:25:51.708713-08:00"}
{"id":"nixcfg-312","title":"Update codex to 0.86.0 in nixpkgs","description":"## Summary\nThe OpenAI Codex CLI is outdated in nixpkgs.\n\n- **nixpkgs version:** 0.80.0\n- **Homebrew version:** 0.84.0\n- **Homepage:** https://github.com/openai/codex\n\n## Current state\nCurrently installed via Homebrew cask in `modules/darwin/george/brew-apps.nix`.\n\n## Goal\nUpdate nixpkgs package to 0.84.0, then migrate from Homebrew to Nix.\n\n## Acceptance criteria\n- [ ] Submit PR to nixpkgs updating codex to 0.84.0\n- [ ] Once merged, remove from brew-apps.nix\n- [ ] Add to Nix packages","status":"in_progress","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:05:43.91874-08:00","created_by":"gkze","updated_at":"2026-01-15T22:08:03.034567-08:00"}
{"id":"nixcfg-3to","title":"Add platform conditional for homebrew-zsh-completion overlay","description":"## Summary\nThe `homebrew-zsh-completion` overlay in `overlays.nix:61-78` fetches Homebrew zsh completions, which is only useful on Darwin where Homebrew exists.\n\n## Current code (overlays.nix:61-78)\n```nix\nhomebrew-zsh-completion = prev.stdenvNoCC.mkDerivation {\n  name = \"brew-zsh-compmletion\";\n  src = builtins.fetchurl {\n    url = outputs.lib.ghRaw {\n      owner = \"Homebrew\";\n      repo = \"brew\";\n      ...\n    };\n  };\n  ...\n};\n```\n\n## Issue\n- This package is fetched/built on all platforms, including NixOS where Homebrew doesn't exist\n- Wastes build time and store space on Linux systems\n\n## Fix options\n1. Wrap in `lib.optionalAttrs prev.stdenv.isDarwin`\n2. Move to a darwin-specific overlay file (see nixcfg-qec for overlay splitting)\n\n## Acceptance criteria\n- [ ] Only build homebrew-zsh-completion on Darwin\n- [ ] Ensure NixOS builds don't reference this package","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T21:12:23.083262-08:00","created_by":"gkze","updated_at":"2026-01-14T21:12:23.083262-08:00","dependencies":[{"issue_id":"nixcfg-3to","depends_on_id":"nixcfg-qec","type":"relates-to","created_at":"2026-01-14T21:13:28.380466-08:00","created_by":"gkze"}]}
{"id":"nixcfg-41d","title":"Fix SSH StrictHostKeyChecking vulnerability","description":"**File:** home/george/configuration.nix:207\n\n```nix\nStrictHostKeyChecking = \"no\"\n```\n\n**Risk:** Makes MITM attacks possible for all SSH connections\n**Fix:** Only disable for specific trusted hosts, or remove entirely","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-10T16:20:53.752457-08:00","created_by":"george","updated_at":"2026-01-10T16:20:53.752457-08:00"}
{"id":"nixcfg-4oc","title":"Fix spectre_oxi build missing lua symbols during linking","description":"Location: home/george/nixvim.nix:666\n\nThe spectre neovim plugin is currently disabled (spectre.enable = false) because the spectre_oxi build is missing lua symbols during linking.\n\nThis needs investigation to fix the build issue and re-enable the plugin.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-10T16:15:55.004699-08:00","created_by":"george","updated_at":"2026-01-10T16:15:55.004699-08:00"}
{"id":"nixcfg-50f","title":"Fix wallpaper path issue","description":"**File:** stylix.nix:7\n\n```nix\nimage = ./wallpaper.jpeg;\n```\n\n- Local file not tracked in git; may break on fresh clone\n- **Fix:** Add to git or use URL with pkgs.fetchurl","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:22:05.840273-08:00","created_by":"george","updated_at":"2026-01-10T16:22:05.840273-08:00"}
{"id":"nixcfg-64s","title":"Fix platform-specific library extension in codesnap-nvim overlay","description":"## Summary\nThe codesnap-nvim overlay in `overlays.nix:199-202` hardcodes `.dylib` (macOS library extension), which will fail on Linux where the extension should be `.so`.\n\n## Current code (overlays.nix:199-202)\n```nix\nfunction fetch.ensure_lib()\n  return \"...${vprev.codesnap-nvim.passthru.codesnap-lib}/lib/libgenerator.dylib\"\nend\n```\n\n## Fix\nUse platform-conditional extension:\n```nix\nlibExt = if pkgs.stdenv.isDarwin then \"dylib\" else \"so\";\n# Then: libgenerator.${libExt}\n```\n\n## Acceptance criteria\n- [ ] Detect platform and use appropriate library extension\n- [ ] Test on both Darwin and Linux builds","status":"open","priority":1,"issue_type":"bug","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T17:40:39.491658-08:00","created_by":"gkze","updated_at":"2026-01-14T17:40:39.491658-08:00"}
{"id":"nixcfg-711","title":"Remove global allowInsecure flag","description":"**File:** modules/common.nix:62\n\n```nix\nallowInsecure = true;\n```\n\n**Risk:** May allow installation of packages with known vulnerabilities\n**Fix:** Remove or document why it's necessary; use per-package overrides instead","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-10T16:20:53.858542-08:00","created_by":"george","updated_at":"2026-01-10T16:20:53.858542-08:00"}
{"id":"nixcfg-7kr","title":"Add platform conditionals for Darwin-specific paths","description":"## Summary\nSeveral files contain hardcoded Darwin-specific paths that will fail on NixOS.\n\n## Affected files and paths\n\n### home/george/darwin.nix:19\n- `/usr/bin/ssh-add` - Darwin-specific binary location\n\n### modules/home/town.nix:16\n- `/opt/homebrew/bin/op` - Homebrew-installed 1Password CLI (see also nixcfg-ugs)\n\n### home/george/python.nix:33\n- `Library/Application Support` - macOS application support directory\n\n### home/george/configuration.nix:30\n- `:/usr/bin:/sbin` in PATH - Darwin system paths\n\n### modules/darwin/george/dock-apps.nix, town-dock-apps.nix\n- `/System/Applications/*.app`, `/Applications/*.app` - Darwin app paths\n\n## Acceptance criteria\n- [ ] Add platform conditionals or move to darwin-specific modules\n- [ ] Ensure linux equivalents exist where applicable\n- [ ] Document any Darwin-only functionality","status":"open","priority":2,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T17:40:53.864814-08:00","created_by":"gkze","updated_at":"2026-01-14T17:40:53.864814-08:00","dependencies":[{"issue_id":"nixcfg-7kr","depends_on_id":"nixcfg-ugs","type":"relates-to","created_at":"2026-01-14T21:12:08.626643-08:00","created_by":"gkze"}]}
{"id":"nixcfg-9sl","title":"Reduce machine configuration duplication","description":"**Files:** darwin/argus.nix, darwin/rocinante.nix\n\n~80% identical code. Create a parameterized base:\n\n```nix\n# darwin/default.nix\n{ hostname, extraHomeModules ? [], extraSystemModules ? [] }:\nmkSystem {\n  system = \"aarch64-darwin\";\n  users = [ \"george\" ];\n  homeModules = [ ./modules/home/macbook-pro-16in.nix ] ++ extraHomeModules;\n  systemModules = baseModules ++ extraSystemModules;\n}\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:22:05.427418-08:00","created_by":"george","updated_at":"2026-01-10T16:22:05.427418-08:00"}
{"id":"nixcfg-a2e","title":"Clean up commented code","description":"Several files have commented-out code that should be removed or documented:\n\n- git.nix:38-42 - difftastic (replaced by delta)\n- configuration.nix:153-167 - ghostty config duplicate\n- go.nix:15-19 - go zsh plugin\n- packages.nix:6 - gitbutler","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:22:24.061368-08:00","created_by":"george","updated_at":"2026-01-10T16:22:24.061368-08:00"}
{"id":"nixcfg-abo","title":"Add NixOS support infrastructure","description":"## Summary\nThis codebase is Darwin-first and cannot build NixOS hosts. The infrastructure for cross-platform support exists in lib.nix (kernel detection, path abstractions), but NixOS-specific implementations are missing.\n\n## Critical blockers\n\n### Missing files that are imported but don't exist:\n- `modules/home/linux.nix` - required by lib.nix:86 and lib.nix:152\n- `home/george/nixos.nix` - required by home/george/configuration.nix:14\n\n### Empty/stub files:\n- `modules/nixos/base.nix` - contains only `{ }`\n\n### Missing directories:\n- `nixos/` - no directory for NixOS host configurations\n\n## Flake output limitation\nThe flake uses `flakelight-darwin` which only generates `darwinConfigurations`. Need to add `nixosConfigurations` support.\n\n## Optional optimization: Darwin-only flake inputs\nThe following flake inputs (lines 110-126) are Darwin-specific but fetched on all platforms:\n- `homebrew-core` (line 114-116)\n- `homebrew-cask` (line 110-113)\n- `macfuse` (line 122-125)\n- `pantsbuild-tap` (line 142-145)\n\nConsider making these conditional or documenting they're Darwin-only to avoid unnecessary fetches on NixOS builds.\n\n## Acceptance criteria\n- Create `modules/home/linux.nix` with systemd user services\n- Create `home/george/nixos.nix` for Linux-specific home config\n- Populate `modules/nixos/base.nix` with boot loader, systemd, etc.\n- Create `nixos/` directory structure\n- Add `nixosConfigurations` to flake outputs","status":"open","priority":1,"issue_type":"feature","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T17:40:25.606689-08:00","created_by":"gkze","updated_at":"2026-01-14T21:13:07.456389-08:00","dependencies":[{"issue_id":"nixcfg-abo","depends_on_id":"nixcfg-64s","type":"blocks","created_at":"2026-01-14T17:41:17.54952-08:00","created_by":"gkze"},{"issue_id":"nixcfg-abo","depends_on_id":"nixcfg-7kr","type":"blocks","created_at":"2026-01-14T17:41:22.736449-08:00","created_by":"gkze"},{"issue_id":"nixcfg-abo","depends_on_id":"nixcfg-oba","type":"blocks","created_at":"2026-01-14T17:41:27.903901-08:00","created_by":"gkze"},{"issue_id":"nixcfg-abo","depends_on_id":"nixcfg-3to","type":"blocks","created_at":"2026-01-14T21:13:18.028622-08:00","created_by":"gkze"},{"issue_id":"nixcfg-abo","depends_on_id":"nixcfg-bbk","type":"blocks","created_at":"2026-01-14T21:13:23.206388-08:00","created_by":"gkze"}]}
{"id":"nixcfg-bbk","title":"Fix mountpoint-s3 fuse dependency for cross-platform builds","description":"## Summary\nThe `mountpoint-s3` overlay in `overlays.nix:80-97` uses `fuse` as a build dependency, but the fuse package differs between macOS (macfuse) and Linux (fuse/fuse3).\n\n## Current code (overlays.nix:92)\n```nix\nbuildInputs = with prev; [ fuse ];\n```\n\n## Issue\n- On macOS, this should use macfuse (and there's already a `macfuse` flake input at line 122-125)\n- On Linux, this should use the standard `fuse` or `fuse3` package\n- Current code may fail or use wrong fuse implementation depending on platform\n\n## Fix\n```nix\nbuildInputs = with prev; [\n  (if prev.stdenv.isDarwin then macfuse else fuse3)\n];\n```\n\nOr use the existing macfuse flake input for Darwin builds.\n\n## Acceptance criteria\n- [ ] Use correct fuse package per platform\n- [ ] Test mountpoint-s3 builds on both Darwin and Linux","status":"open","priority":2,"issue_type":"bug","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T21:12:36.234574-08:00","created_by":"gkze","updated_at":"2026-01-14T21:12:36.234574-08:00"}
{"id":"nixcfg-blq","title":"Update code-cursor to 2.3.35 in nixpkgs","description":"Nixpkgs has 2.3.29, Homebrew has 2.3.35. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:35.607248-08:00","created_by":"gkze","updated_at":"2026-01-15T23:26:02.041134-08:00"}
{"id":"nixcfg-dbf","title":"Re-enable mac-app-util nixpkgs follows once SBCL on Darwin is fixed","description":"Location: flake.nix:45\n\nThe mac-app-util input has nixpkgs.follows commented out. The issue is that gitlab.common-lisp.net returns HTML (bot protection) instead of tar.gz when fetching SBCL.\n\nThis should be re-enabled once the upstream SBCL on Darwin issue is resolved.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-10T16:15:54.891597-08:00","created_by":"george","updated_at":"2026-01-10T16:15:54.891597-08:00"}
{"id":"nixcfg-en2","title":"Update gemini-cli to 0.24.0 in nixpkgs","description":"Nixpkgs has 0.23.0, Homebrew has 0.24.0. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\nOnce nixpkgs is updated:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Uninstall from Homebrew**: `brew uninstall \u003cname\u003e`\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n6. **Verify**: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`","status":"closed","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:33.314222-08:00","created_by":"gkze","updated_at":"2026-01-15T23:23:04.834632-08:00","closed_at":"2026-01-15T23:23:04.834632-08:00","close_reason":"Migrated gemini-cli from Homebrew to Nix via programs.gemini-cli module with overlay for 0.24.0"}
{"id":"nixcfg-i1u","title":"Consolidate theme configuration","description":"Theme (Catppuccin Frappe) is configured in multiple places:\n\n- stylix.nix:7 - base theme\n- nixvim.nix:67-99 - explicit colorscheme\n- configuration.nix:112-116 - bat theme\n- git.nix:49 - delta theme\n\n**Fix:** Create single theme.nix module with variables other modules reference","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T16:21:39.079524-08:00","created_by":"george","updated_at":"2026-01-10T16:21:39.079524-08:00"}
{"id":"nixcfg-i2p","title":"Document disabled features","description":"Several features are disabled without explanation:\n\n- zsh.nix:255 - Zellij integration disabled\n- nixvim.nix:665 - spectre_oxi plugin (TODO comment)\n- nixvim.nix:644 - kulala plugin commented out\n- stylix.nix:9-16 - bat, nixvim, vscode targets disabled\n\nAdd comments explaining *why* each is disabled.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:22:05.561622-08:00","created_by":"george","updated_at":"2026-01-10T16:22:05.561622-08:00"}
{"id":"nixcfg-msj","title":"Implement secrets management","description":"**Current State:** No encryption; metadata in plain text (meta.nix)\n\n**Recommended:** Implement agenix or sops-nix:\n\n```nix\n# Example with agenix\nage.secrets.gpgKey.file = ../secrets/gpg-key.age;\nprograms.gpg.settings.default-key = config.age.secrets.gpgKey.path;\n```","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-10T16:21:38.947357-08:00","created_by":"george","updated_at":"2026-01-10T16:21:38.947357-08:00"}
{"id":"nixcfg-mw2","title":"Update vscode to 1.108.1+ in nixpkgs","description":"Nixpkgs has 1.107.1 (stable), Homebrew has 1.108.1 (stable) / 1.109.0 (insiders). Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:37.10709-08:00","created_by":"gkze","updated_at":"2026-01-15T23:25:41.364555-08:00"}
{"id":"nixcfg-oba","title":"Add NixOS equivalents for Darwin system services","description":"## Summary\nDarwin-specific system services using launchd need NixOS equivalents using systemd.\n\n## Current Darwin services (modules/darwin/base.nix)\n\n### launchd.daemons.maxfiles\nIncreases file descriptor limits. NixOS equivalent:\n```nix\nboot.kernel.sysctl = {\n  \"fs.file-max\" = 1048576;\n};\n# Or systemd-based approach\n```\n\n### launchd.daemons.maxproc\nIncreases process limits. NixOS equivalent via sysctl or limits.conf.\n\n## Current Darwin user services (home/george/darwin.nix)\n\n### launchd.agents.ssh-add\nLoads SSH keys into keychain. NixOS equivalent:\n```nix\nservices.ssh-agent.enable = true;\n# Or systemd user service\n```\n\n### launchd.agents.gpg-agent\nGPG agent service. NixOS equivalent:\n```nix\nservices.gpg-agent = {\n  enable = true;\n  enableSshSupport = true;\n};\n```\n\n## Acceptance criteria\n- [ ] Create systemd equivalents in modules/nixos/base.nix\n- [ ] Create user service equivalents in modules/home/linux.nix\n- [ ] Test service functionality on NixOS","status":"open","priority":2,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-14T17:41:07.428186-08:00","created_by":"gkze","updated_at":"2026-01-14T17:41:07.428186-08:00"}
{"id":"nixcfg-os2","title":"Add input documentation to flake.nix","description":"**File:** flake.nix\n\n28 non-flake inputs lack explanation. Add comments:\n\n```nix\n# Vim plugins not available in nixpkgs\nzsh-system-clipboard = { url = \"...\"; flake = false; };\n```","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:22:24.184322-08:00","created_by":"george","updated_at":"2026-01-10T16:22:24.184322-08:00"}
{"id":"nixcfg-qec","title":"Split monolithic overlays.nix (226 lines)","description":"**File:** overlays.nix\n\nCurrently mixes Go, Python, Rust, and Vim plugins. Recommended:\n\n```\noverlays/\n├── default.nix        # Imports all overlays\n├── go-packages.nix    # beads, stars\n├── python-packages.nix # beads-mcp, toad\n├── vim-plugins.nix    # treesitter overrides, codesnap\n└── utils.nix          # homebrew-zsh-completion, mountpoint-s3\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T16:21:38.81746-08:00","created_by":"george","updated_at":"2026-01-10T16:21:38.81746-08:00","dependencies":[{"issue_id":"nixcfg-qec","depends_on_id":"nixcfg-3to","type":"relates-to","created_at":"2026-01-14T21:13:28.380939-08:00","created_by":"gkze"}]}
{"id":"nixcfg-s0l","title":"Parameterize hardware-specific values","description":"**File:** modules/home/macbook-pro-16in.nix:2-12\n\n```nix\ndimensions = { columns = 250; lines = 80; };\nposition = { x = 433; y = 400; };\n```\n\n- Magic numbers not portable across displays\n- **Fix:** Make configurable via module options or remove","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:22:05.975329-08:00","created_by":"george","updated_at":"2026-01-10T16:22:05.975329-08:00"}
{"id":"nixcfg-s2b","title":"Update zed-editor to 0.219.4 in nixpkgs","description":"Nixpkgs has 0.218.6, Homebrew has 0.219.4. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:34.290022-08:00","created_by":"gkze","updated_at":"2026-01-15T23:26:22.70845-08:00"}
{"id":"nixcfg-t82","title":"Add package categories to packages.nix","description":"**File:** home/george/packages.nix\n\n80+ packages with no organization. Add comment sections:\n\n```nix\nhome.packages = with pkgs; [\n  # === CLI Tools ===\n  bat bottom eza fd fzf ripgrep\n\n  # === Development ===\n  git-lfs gh gitui\n\n  # === TUI Applications ===\n  yazi lazygit\n\n  # === Languages ===\n  nodejs bun\n];\n```","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:22:23.935173-08:00","created_by":"george","updated_at":"2026-01-10T16:22:23.935173-08:00"}
{"id":"nixcfg-tfh","title":"Split large nixvim.nix (902 lines)","description":"**File:** home/george/nixvim.nix\n\nThe file is too large to maintain effectively. Recommended split:\n\n```\nhome/george/nixvim/\n├── default.nix       # Main entry, imports all\n├── plugins.nix       # Plugin configurations (~400 lines)\n├── keymaps.nix       # Keybindings (~130 lines)\n├── lsp.nix           # LSP servers (~100 lines)\n├── colorscheme.nix   # Theme settings\n└── autocmds.nix      # Autocommands\n```","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-10T16:21:38.687731-08:00","created_by":"george","updated_at":"2026-01-10T16:21:38.687731-08:00"}
{"id":"nixcfg-ugs","title":"Fix hardcoded 1Password path","description":"**File:** modules/home/town.nix:16\n\n```nix\nHOME=$(mktemp -d) /opt/homebrew/bin/op completion zsh \u003e $out/_op\n```\n\n**Risk:** Breaks on Intel Macs (/usr/local/bin) or if 1Password not installed\n**Fix:** Use pkgs._1password or make conditional with lib.optionalAttrs","status":"open","priority":0,"issue_type":"bug","created_at":"2026-01-10T16:21:14.264723-08:00","created_by":"george","updated_at":"2026-01-10T16:21:14.264723-08:00","dependencies":[{"issue_id":"nixcfg-ugs","depends_on_id":"nixcfg-7kr","type":"relates-to","created_at":"2026-01-14T21:12:08.627142-08:00","created_by":"gkze"}]}
{"id":"nixcfg-wba","title":"Update gitbutler to 0.18.3 in nixpkgs","description":"Nixpkgs has 0.15.10, Homebrew has 0.18.3. Significant version gap. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:34.857454-08:00","created_by":"gkze","updated_at":"2026-01-15T23:26:12.35508-08:00"}
{"id":"nixcfg-x2z","title":"Consolidate dock configuration","description":"**Files:**\n- modules/darwin/george/dock-apps.nix (24 lines)\n- modules/darwin/george/town-dock-apps.nix (27 lines)\n\n85% overlap. Merge into single parametrized module:\n\n```nix\n{ config, lib, ... }: {\n  options.dock.extraApps = lib.mkOption { default = []; };\n  config.system.defaults.dock.persistent-apps =\n    baseApps ++ config.dock.extraApps;\n}\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:22:05.704935-08:00","created_by":"george","updated_at":"2026-01-10T16:22:05.704935-08:00"}
{"id":"nixcfg-z40","title":"Update datagrip to 2025.3.3 in nixpkgs","description":"Nixpkgs has 2025.3.2, Homebrew has 2025.3.3. Update needed to migrate from Homebrew to Nixpkgs for NixOS compatibility.\n\n## Migration Instructions (Homebrew → Nix)\n\n### Option A: Nixpkgs version is sufficient\nIf nixpkgs has the version you need:\n\n1. **Check for Home Manager module**: Look for `programs.\u003cname\u003e` at https://nix-community.github.io/home-manager/options.html\n\n2. **If module exists** (preferred):\n   ```nix\n   # In home/george/configuration.nix under programs = { ... }\n   programs.\u003cname\u003e.enable = true;\n   ```\n\n3. **If no module**, add to packages:\n   ```nix\n   # In home/george/packages.nix\n   home.packages = with pkgs; [ \u003cname\u003e ];\n   ```\n\n4. **Remove from Homebrew**: Delete from `modules/darwin/george/brew-apps.nix` (brews or casks list)\n\n5. **Rebuild**: `nh darwin switch --no-nom .`\n\n### Option B: Need newer version than nixpkgs (create overlay)\n\n1. **Add flake input** in `flake.nix`:\n   ```nix\n   \u003cname\u003e = {\n     url = \"github:\u003cowner\u003e/\u003crepo\u003e/v\u003cversion\u003e\";\n     flake = false;\n   };\n   ```\n\n2. **Create overlay** in `overlays.nix` (pattern depends on build system):\n\n   **For Rust packages (`buildRustPackage`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     cargoDeps = prev.rustPlatform.fetchCargoVendor {\n       src = inputs.\u003cname\u003e;\n       hash = \"\u003chash\u003e\";  # Use lib.fakeHash first, build to get correct hash\n     };\n   };\n   ```\n\n   **For npm packages (`buildNpmPackage`):**\n   ```nix\n   \u003cname\u003e = let\n     npmDepsHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   in prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     inherit npmDepsHash;\n     npmDeps = prev.fetchNpmDeps {\n       src = inputs.\u003cname\u003e;\n       hash = npmDepsHash;\n     };\n   };\n   ```\n   Note: Must override BOTH npmDepsHash AND npmDeps for npm packages.\n\n   **For Go packages (`buildGoModule`):**\n   ```nix\n   \u003cname\u003e = prev.\u003cname\u003e.overrideAttrs {\n     version = \"\u003cversion\u003e\";\n     src = inputs.\u003cname\u003e;\n     vendorHash = \"\u003chash\u003e\";  # Use lib.fakeHash first\n   };\n   ```\n\n3. **Get correct hash**: Build with `lib.fakeHash`, copy the \"got:\" hash from error\n\n4. **Update flake.lock**: `nix flake update \u003cname\u003e`\n\n5. **Continue with Option A steps** (HM module or packages, remove from Homebrew, rebuild)\n\n### Verification\n- Binary: `which \u003cname\u003e` should show `/etc/profiles/per-user/george/bin/\u003cname\u003e`\n- Version: `\u003cname\u003e --version` should show expected version","status":"open","priority":3,"issue_type":"task","owner":"george.kontridze@gmail.com","created_at":"2026-01-15T22:00:33.575601-08:00","created_by":"gkze","updated_at":"2026-01-15T23:26:33.060659-08:00"}
